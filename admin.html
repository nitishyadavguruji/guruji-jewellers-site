<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Guru Ji Jewellers – Admin Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(135deg, #111827, #1f2937);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      color: #111827;
    }
    .card {
      width: 100%;
      max-width: 640px;
      background: #f9fafb;
      border-radius: 18px;
      padding: 20px 18px 22px;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.4);
    }
    .card-header {
      margin-bottom: 10px;
    }
    .title {
      font-size: 20px;
      font-weight: 700;
      color: #111827;
    }
    .subtitle {
      font-size: 13px;
      color: #4b5563;
      margin-top: 4px;
    }
    .badge {
      display: inline-flex;
      align-items: center;
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      background: #fee2e2;
      color: #b91c1c;
      margin-top: 6px;
    }
    form {
      margin-top: 10px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px 14px;
    }
    label {
      font-size: 12px;
      font-weight: 600;
      color: #374151;
      display: block;
      margin-bottom: 3px;
    }
    input,
    select,
    textarea {
      width: 100%;
      padding: 7px 8px;
      border-radius: 8px;
      border: 1px solid #d1d5db;
      font-size: 13px;
      background: #ffffff;
    }
    textarea {
      resize: vertical;
      min-height: 60px;
    }
    .full-row {
      grid-column: 1 / 3;
    }
    .actions {
      grid-column: 1 / 3;
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 4px;
    }
    .btn-primary {
      border: none;
      border-radius: 999px;
      padding: 8px 18px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(135deg, #fbbf24, #f97316);
      color: #111827;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .btn-primary:disabled {
      opacity: 0.6;
      cursor: wait;
    }
    #status {
      font-size: 12px;
    }
    #status.success {
      color: #16a34a;
    }
    #status.error {
      color: #b91c1c;
    }
    .recent {
      grid-column: 1 / 3;
      margin-top: 6px;
      padding: 8px 10px;
      border-radius: 10px;
      background: #111827;
      color: #e5e7eb;
      font-size: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .recent span {
      display: block;
    }
  </style>
</head>
<body>
  <div class="card">
    <div class="card-header">
      <div class="title">Guru Ji Jewellers – Product Upload</div>
      <div class="subtitle">
        Yahan se new products add karo – bracelet, pendant, payal etc. Photo ke saath.
      </div>
      <div class="badge">Admin Use Only</div>
    </div>

    <form id="productForm">
      <div class="full-row">
        <label>Product Name</label>
        <input type="text" name="name" required placeholder="e.g. Gents Heavy Gold Bracelet" />
      </div>

      <div>
        <label>Category</label>
        <select name="category" required>
          <option value="">Select category</option>
          <option>Gents Bracelet</option>
          <option>Ladies Bracelet</option>
          <option>Gents Pendant</option>
          <option>Ladies Pendant</option>
          <option>God Pendant</option>
          <option>Name Pendant</option>
          <option>Customised Pendant</option>
          <option>Ladies Payal</option>
          <option>Gents Payal</option>
          <option>Ring</option>
          <option>Other Jewellery</option>
        </select>
      </div>

      <div>
        <label>Price (₹)</label>
        <input type="number" name="price" required placeholder="e.g. 25999" />
      </div>

      <div>
        <label>Rating (1–5)</label>
        <input type="number" name="rating" min="1" max="5" step="0.1" placeholder="4.8" />
      </div>

      <div>
        <label>Photo (image)</label>
        <input type="file" name="image" accept="image/*" />
      </div>

      <div class="full-row">
        <label>Short Description</label>
        <input
          type="text"
          name="shortDescription"
          placeholder="Premium 22K design – Daily wear, durable finish."
        />
      </div>

      <div class="full-row">
        <label>Full Description / Details</label>
        <textarea
          name="description"
          placeholder="Weight range, alloy, purity, ideal for which occasion etc."
        ></textarea>
      </div>

      <div class="actions">
        <button type="submit" class="btn-primary" id="submitBtn">
          ➕ Add New Product
        </button>
        <div id="status"></div>
      </div>

      <div class="recent" id="recentBox" style="display: none;">
        <span>Last upload:</span>
        <span id="recentText"></span>
      </div>
    </form>
  </div>

  <script>
    const form = document.getElementById("productForm");
    const statusEl = document.getElementById("status");
    const submitBtn = document.getElementById("submitBtn");
    const recentBox = document.getElementById("recentBox");
    const recentText = document.getElementById("recentText");

    const API_URL = "https://guruji-api.onrender.com/api/products"; // tumhara Render API

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      statusEl.textContent = "Uploading...";
      statusEl.className = "";
      submitBtn.disabled = true;

      const formData = new FormData(form);

      try {
        const res = await fetch(API_URL, {
          method: "POST",
          body: formData,
        });

        const data = await res.json();

        if (!res.ok || !data.success) {
          statusEl.textContent = data.message || "Upload failed, please try again.";
          statusEl.className = "error";
        } else {
          statusEl.textContent = "✅ Upload successful – product added.";
          statusEl.className = "success";
          recentText.textContent = `${data.product.name} – ₹${data.product.price}`;
          recentBox.style.display = "flex";
          form.reset();
        }
      } catch (err) {
        console.error(err);
        statusEl.textContent = "Server se connect nahi ho pa ra. Thodi der baad try karo.";
        statusEl.className = "error";
      } finally {
        submitBtn.disabled = false;
      }
    });
  </script>
</body>
</html>
